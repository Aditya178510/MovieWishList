"use strict";(self.webpackChunkmovie_wishlist_frontend=self.webpackChunkmovie_wishlist_frontend||[]).push([[288],{6288:(ut,O,_)=>{_.r(O),_.d(O,{MoviesModule:()=>gt});var m=_(6895),c=_(433),p=_(1002),e=_(8256),y=_(2843),d=_(262),u=_(2340),J=_(529);let f=(()=>{const r=class{constructor(n){this.http=n,this.apiUrl=`${u.N.apiUrl}/api/movies`}handleError(n){let o="An unknown error occurred";return o=n.error instanceof ErrorEvent?`Error: ${n.error.message}`:`Error Code: ${n.status}\nMessage: ${n.message}`,console.error(o),(0,y._)(()=>new Error(o))}getMovie(n){return this.http.get(`${this.apiUrl}/${n}`).pipe((0,d.K)(this.handleError))}addMovie(n){return this.http.post(this.apiUrl,{title:n.title,genre:n.genre,releaseYear:n.releaseYear,runtime:n.runtime,posterUrl:n.posterUrl,rating:n.rating,review:n.review}).pipe((0,d.K)(this.handleError))}updateMovie(n,o){return this.http.put(`${this.apiUrl}/${n}`,{title:o.title,genre:o.genre,releaseYear:o.releaseYear,runtime:o.runtime,posterUrl:o.posterUrl,rating:o.rating,review:o.review}).pipe((0,d.K)(this.handleError))}markAsWatched(n,o,s){const a=[];"number"==typeof o&&a.push(`rating=${o}`),"string"==typeof s&&s.length>0&&a.push(`review=${encodeURIComponent(s)}`);const l=a.length?`?${a.join("&")}`:"";return this.http.put(`${this.apiUrl}/${n}/mark-watched${l}`,{}).pipe((0,d.K)(this.handleError))}deleteMovie(n){return this.http.delete(`${this.apiUrl}/${n}`).pipe((0,d.K)(this.handleError))}getWishlist(){return this.http.get(`${this.apiUrl}/wishlist`).pipe((0,d.K)(this.handleError))}getWatched(){return this.http.get(`${this.apiUrl}/watched`).pipe((0,d.K)(this.handleError))}searchMovies(n){return this.http.get(`${u.N.apiUrl}/api/tmdb/search?query=${encodeURIComponent(n)}`).pipe((0,d.K)(this.handleError))}getTrending(){return this.http.get(`${u.N.apiUrl}/api/tmdb/popular`).pipe((0,d.K)(this.handleError))}likeMovie(n){return this.http.post(`${u.N.apiUrl}/api/social/movies/${n}/like`,{}).pipe((0,d.K)(this.handleError))}unlikeMovie(n){return this.http.delete(`${u.N.apiUrl}/api/social/movies/${n}/unlike`).pipe((0,d.K)(this.handleError))}addComment(n,o){return this.http.post(`${u.N.apiUrl}/api/social/movies/${n}/comments`,{content:o}).pipe((0,d.K)(this.handleError))}getComments(n){return this.http.get(`${u.N.apiUrl}/api/social/movies/${n}/comments`).pipe((0,d.K)(this.handleError))}};let t=r;return r.\u0275fac=function(o){return new(o||r)(e.LFG(J.eN))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),t})();function N(t,r){1&t&&(e.TgZ(0,"div",5)(1,"div",6)(2,"span",7),e._uU(3,"Loading..."),e.qZA()()())}function F(t,r){if(1&t&&(e.TgZ(0,"div",8),e._uU(1),e.qZA()),2&t){const i=e.oxw(2);e.xp6(1),e.hij(" ",i.error," ")}}function Y(t,r){if(1&t&&e._UZ(0,"img",41),2&t){const i=e.oxw(3);e.Q6J("src",i.movie.posterUrl,e.LSH)("alt",i.movie.title)}}function Q(t,r){1&t&&(e.TgZ(0,"div",42)(1,"i",24),e._uU(2,"movie"),e.qZA()())}function L(t,r){if(1&t&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&t){const i=e.oxw(3);e.xp6(1),e.hij("(",i.movie.releaseYear,")")}}function D(t,r){if(1&t&&(e.TgZ(0,"p")(1,"strong"),e._uU(2,"Genre:"),e.qZA(),e._uU(3),e.qZA()),2&t){const i=e.oxw(3);e.xp6(3),e.hij(" ",i.movie.genre,"")}}function W(t,r){if(1&t&&(e.TgZ(0,"p")(1,"strong"),e._uU(2,"Runtime:"),e.qZA(),e._uU(3),e.qZA()),2&t){const i=e.oxw(3);e.xp6(3),e.hij(" ",i.movie.runtime," minutes")}}function E(t,r){if(1&t&&(e.TgZ(0,"p")(1,"strong"),e._uU(2,"Your Rating:"),e.qZA(),e._uU(3),e.qZA()),2&t){const i=e.oxw(3);e.xp6(3),e.hij(" ",i.movie.rating,"/10")}}function S(t,r){if(1&t&&(e.TgZ(0,"p")(1,"strong"),e._uU(2,"Added:"),e.qZA(),e._uU(3),e.ALo(4,"date"),e.qZA()),2&t){const i=e.oxw(3);e.xp6(3),e.hij(" ",e.xi3(4,1,i.movie.createdAt,"medium"),"")}}function $(t,r){if(1&t&&(e.TgZ(0,"p")(1,"strong"),e._uU(2,"Last Updated:"),e.qZA(),e._uU(3),e.ALo(4,"date"),e.qZA()),2&t){const i=e.oxw(3);e.xp6(3),e.hij(" ",e.xi3(4,1,i.movie.updatedAt,"medium"),"")}}function K(t,r){if(1&t&&(e.TgZ(0,"div",43)(1,"h3"),e._uU(2,"Your Review"),e.qZA(),e.TgZ(3,"p"),e._uU(4),e.qZA()()),2&t){const i=e.oxw(3);e.xp6(4),e.Oqu(i.movie.review)}}function j(t,r){if(1&t){const i=e.EpF();e.TgZ(0,"button",44),e.NdJ("click",function(){e.CHM(i);const o=e.oxw(3);return e.KtG(o.changeStatus("WATCHED"))}),e.TgZ(1,"i",24),e._uU(2,"visibility"),e.qZA(),e._uU(3," Mark as Watched "),e.qZA()}}function H(t,r){if(1&t){const i=e.EpF();e.TgZ(0,"button",45),e.NdJ("click",function(){e.CHM(i);const o=e.oxw(3);return e.KtG(o.changeStatus("WISHLIST"))}),e.TgZ(1,"i",24),e._uU(2,"bookmark"),e.qZA(),e._uU(3," Move to Wishlist "),e.qZA()}}function z(t,r){1&t&&(e.TgZ(0,"div",46),e._uU(1," Comment cannot be empty. "),e.qZA())}function R(t,r){1&t&&(e.TgZ(0,"div",46),e._uU(1," Comment cannot exceed 500 characters. "),e.qZA())}function G(t,r){1&t&&e._UZ(0,"span",47)}function B(t,r){if(1&t&&(e.TgZ(0,"div",48)(1,"div",49)(2,"span",50),e._uU(3),e.qZA(),e.TgZ(4,"span",51),e._uU(5),e.ALo(6,"date"),e.qZA()(),e.TgZ(7,"div",52),e._uU(8),e.qZA()()),2&t){const i=r.$implicit;e.xp6(3),e.Oqu(i.username),e.xp6(2),e.Oqu(e.xi3(6,3,i.createdAt,"medium")),e.xp6(3),e.hij(" ",i.content," ")}}function V(t,r){1&t&&(e.TgZ(0,"div",53)(1,"p"),e._uU(2,"No comments yet. Be the first to comment!"),e.qZA()())}const X=function(t,r){return{wishlist:t,watched:r}},ee=function(t){return{liked:t}},te=function(t){return{"is-invalid":t}};function ie(t,r){if(1&t){const i=e.EpF();e.TgZ(0,"div",9)(1,"div",10)(2,"div",11)(3,"div",12),e.YNc(4,Y,1,2,"img",13),e.YNc(5,Q,3,0,"div",14),e.qZA()(),e.TgZ(6,"div",15)(7,"div",16)(8,"h1"),e._uU(9),e.YNc(10,L,2,1,"span",17),e.qZA(),e.TgZ(11,"div",18)(12,"span",19),e._uU(13),e.qZA()()(),e.TgZ(14,"div",20),e.YNc(15,D,4,1,"p",17),e.YNc(16,W,4,1,"p",17),e.YNc(17,E,4,1,"p",17),e.YNc(18,S,5,4,"p",17),e.YNc(19,$,5,4,"p",17),e.qZA(),e.YNc(20,K,5,1,"div",21),e.TgZ(21,"div",22)(22,"button",23),e.NdJ("click",function(){e.CHM(i);const o=e.oxw(2);return e.KtG(o.editMovie())}),e.TgZ(23,"i",24),e._uU(24,"edit"),e.qZA(),e._uU(25," Edit "),e.qZA(),e.TgZ(26,"button",25),e.NdJ("click",function(){e.CHM(i);const o=e.oxw(2);return e.KtG(o.deleteMovie())}),e.TgZ(27,"i",24),e._uU(28,"delete"),e.qZA(),e._uU(29," Delete "),e.qZA(),e.YNc(30,j,4,0,"button",26),e.YNc(31,H,4,0,"button",27),e.qZA(),e.TgZ(32,"div",28)(33,"div",29)(34,"button",30),e.NdJ("click",function(){e.CHM(i);const o=e.oxw(2);return e.KtG(o.toggleLike())}),e.TgZ(35,"i",24),e._uU(36,"favorite"),e.qZA(),e.TgZ(37,"span"),e._uU(38),e.qZA()()()()()(),e.TgZ(39,"div",31)(40,"h3"),e._uU(41),e.qZA(),e.TgZ(42,"form",32),e.NdJ("ngSubmit",function(){e.CHM(i);const o=e.oxw(2);return e.KtG(o.submitComment())}),e.TgZ(43,"div",33),e._UZ(44,"textarea",34),e.YNc(45,z,2,0,"div",35),e.YNc(46,R,2,0,"div",35),e.qZA(),e.TgZ(47,"button",36),e.YNc(48,G,1,0,"span",37),e._uU(49," Post Comment "),e.qZA()(),e.TgZ(50,"div",38),e.YNc(51,B,9,6,"div",39),e.YNc(52,V,3,0,"div",40),e.qZA()()()}if(2&t){const i=e.oxw(2);let n,o,s;e.xp6(4),e.Q6J("ngIf",i.movie.posterUrl),e.xp6(1),e.Q6J("ngIf",!i.movie.posterUrl),e.xp6(4),e.hij("",i.movie.title," "),e.xp6(1),e.Q6J("ngIf",i.movie.releaseYear),e.xp6(2),e.Q6J("ngClass",e.WLB(25,X,"WISHLIST"===i.movie.status,"WATCHED"===i.movie.status)),e.xp6(1),e.Oqu(i.movie.status),e.xp6(2),e.Q6J("ngIf",i.movie.genre),e.xp6(1),e.Q6J("ngIf",i.movie.runtime),e.xp6(1),e.Q6J("ngIf",i.movie.rating),e.xp6(1),e.Q6J("ngIf",i.movie.createdAt),e.xp6(1),e.Q6J("ngIf",i.movie.updatedAt),e.xp6(1),e.Q6J("ngIf",i.movie.review),e.xp6(10),e.Q6J("ngIf","WISHLIST"===i.movie.status),e.xp6(1),e.Q6J("ngIf","WATCHED"===i.movie.status),e.xp6(3),e.Q6J("ngClass",e.VKq(28,ee,i.movie.userLiked)),e.xp6(4),e.hij("",i.movie.likesCount||0," likes"),e.xp6(3),e.hij("Comments (",i.comments.length,")"),e.xp6(1),e.Q6J("formGroup",i.commentForm),e.xp6(2),e.Q6J("ngClass",e.VKq(30,te,(null==(n=i.commentForm.get("content"))?null:n.invalid)&&(null==(n=i.commentForm.get("content"))?null:n.touched))),e.xp6(1),e.Q6J("ngIf",null==(o=i.commentForm.get("content"))||null==o.errors?null:o.errors.required),e.xp6(1),e.Q6J("ngIf",null==(s=i.commentForm.get("content"))||null==s.errors?null:s.errors.maxlength),e.xp6(1),e.Q6J("disabled",i.commentForm.invalid||i.commentLoading),e.xp6(1),e.Q6J("ngIf",i.commentLoading),e.xp6(3),e.Q6J("ngForOf",i.comments),e.xp6(1),e.Q6J("ngIf",0===i.comments.length)}}function ne(t,r){if(1&t&&(e.TgZ(0,"div",1),e.YNc(1,N,4,0,"div",2),e.YNc(2,F,2,1,"div",3),e.YNc(3,ie,53,32,"div",4),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.loading),e.xp6(1),e.Q6J("ngIf",i.error),e.xp6(1),e.Q6J("ngIf",i.movie&&!i.loading)}}function oe(t,r){1&t&&(e.TgZ(0,"div",1)(1,"div",54)(2,"i",24),e._uU(3,"movie_filter"),e.qZA(),e.TgZ(4,"h2"),e._uU(5,"Movie Not Found"),e.qZA(),e.TgZ(6,"p"),e._uU(7,"The movie you're looking for doesn't exist or has been removed."),e.qZA(),e.TgZ(8,"button",55),e._uU(9,"Back to Wishlist"),e.qZA()()())}let re=(()=>{const r=class{constructor(n,o,s,a){this.route=n,this.router=o,this.movieService=s,this.formBuilder=a,this.movie=null,this.comments=[],this.loading=!1,this.commentLoading=!1,this.error=""}ngOnInit(){this.commentForm=this.formBuilder.group({content:["",[c.kI.required,c.kI.maxLength(500)]]}),this.route.paramMap.subscribe(n=>{const o=Number(n.get("id"));o&&(this.loadMovie(o),this.loadComments(o))})}loadMovie(n){this.loading=!0,this.movieService.getMovie(n).subscribe({next:o=>{this.movie=o,this.loading=!1},error:o=>{this.error="Failed to load movie details. Please try again later.",console.error("Error loading movie:",o),this.loading=!1}})}loadComments(n){this.movieService.getComments(n).subscribe({next:o=>{this.comments=o},error:o=>{console.error("Error loading comments:",o)}})}toggleLike(){this.movie&&(this.movie.userLiked?this.movieService.unlikeMovie(this.movie.id).subscribe({next:()=>{this.movie&&(this.movie.userLiked=!1,this.movie.likesCount=(this.movie.likesCount||0)-1)},error:n=>{console.error("Error unliking movie:",n)}}):this.movieService.likeMovie(this.movie.id).subscribe({next:()=>{this.movie&&(this.movie.userLiked=!0,this.movie.likesCount=(this.movie.likesCount||0)+1)},error:n=>{console.error("Error liking movie:",n)}}))}submitComment(){if(this.commentForm.invalid||!this.movie)return;this.commentLoading=!0;const n=this.commentForm.get("content")?.value;this.movieService.addComment(this.movie.id,n).subscribe({next:o=>{this.comments.unshift(o),this.commentForm.reset(),this.commentLoading=!1,this.movie&&(this.movie.commentsCount=(this.movie.commentsCount||0)+1)},error:o=>{console.error("Error adding comment:",o),this.commentLoading=!1}})}changeStatus(n){if(!this.movie)return;const o={...this.movie,status:n};this.loading=!0,this.movieService.updateMovie(this.movie.id,o).subscribe({next:s=>{this.movie=s,this.loading=!1},error:s=>{console.error("Error updating movie status:",s),this.error="Failed to update movie status. Please try again.",this.loading=!1}})}editMovie(){this.movie&&this.router.navigate(["/movies/edit",this.movie.id])}deleteMovie(){this.movie&&confirm("Are you sure you want to delete this movie?")&&this.movieService.deleteMovie(this.movie.id).subscribe({next:()=>{this.router.navigate(["/movies/wishlist"])},error:n=>{console.error("Error deleting movie:",n)}})}};let t=r;return r.\u0275fac=function(o){return new(o||r)(e.Y36(p.gz),e.Y36(p.F0),e.Y36(f),e.Y36(c.qu))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-movie-detail"]],decls:2,vars:2,consts:[["class","container",4,"ngIf"],[1,"container"],["class","loading-spinner",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["class","movie-detail",4,"ngIf"],[1,"loading-spinner"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"alert","alert-danger"],[1,"movie-detail"],[1,"row"],[1,"col-md-4"],[1,"movie-poster"],[3,"src","alt",4,"ngIf"],["class","no-poster",4,"ngIf"],[1,"col-md-8"],[1,"movie-header"],[4,"ngIf"],[1,"movie-status"],[1,"badge",3,"ngClass"],[1,"movie-info"],["class","movie-review",4,"ngIf"],[1,"movie-actions"],[1,"btn","btn-primary",3,"click"],[1,"material-icons"],[1,"btn","btn-danger",3,"click"],["class","btn btn-success",3,"click",4,"ngIf"],["class","btn btn-warning",3,"click",4,"ngIf"],[1,"movie-social"],[1,"likes"],[1,"btn-like",3,"ngClass","click"],[1,"comments-section"],[1,"comment-form",3,"formGroup","ngSubmit"],[1,"mb-3"],["formControlName","content","rows","3","placeholder","Write a comment...",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],[1,"comments-list"],["class","comment",4,"ngFor","ngForOf"],["class","no-comments",4,"ngIf"],[3,"src","alt"],[1,"no-poster"],[1,"movie-review"],[1,"btn","btn-success",3,"click"],[1,"btn","btn-warning",3,"click"],[1,"invalid-feedback"],[1,"spinner-border","spinner-border-sm","me-1"],[1,"comment"],[1,"comment-header"],[1,"comment-author"],[1,"comment-date"],[1,"comment-content"],[1,"no-comments"],[1,"not-found"],["routerLink","/movies/wishlist",1,"btn","btn-primary"]],template:function(o,s){1&o&&(e.YNc(0,ne,4,3,"div",0),e.YNc(1,oe,10,0,"div",0)),2&o&&(e.Q6J("ngIf",s.movie),e.xp6(1),e.Q6J("ngIf",!s.movie&&!s.loading&&!s.error))},dependencies:[m.mk,m.sg,m.O5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,p.rH,m.uU],styles:[".loading-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:50px 0}.movie-detail[_ngcontent-%COMP%]{margin:20px 0}.movie-poster[_ngcontent-%COMP%]{width:100%;border-radius:8px;overflow:hidden;box-shadow:0 4px 8px #0000001a}.movie-poster[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;display:block}.no-poster[_ngcontent-%COMP%]{background-color:#f0f0f0;height:400px;display:flex;align-items:center;justify-content:center}.no-poster[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:64px;color:#999}.movie-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.movie-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:28px;font-weight:700;color:#333}.movie-status[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{padding:8px 12px;border-radius:4px;font-size:14px;font-weight:700;text-transform:lowercase}.badge.wishlist[_ngcontent-%COMP%]{background-color:#ff9800;color:#fff}.badge.watched[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.movie-info[_ngcontent-%COMP%]{margin-bottom:20px}.movie-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:8px;font-size:16px;color:#555}.movie-review[_ngcontent-%COMP%]{margin-bottom:20px;padding:15px;background-color:#f9f9f9;border-radius:8px;border-left:4px solid #2196f3}.movie-review[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;font-size:18px;color:#333;margin-bottom:10px}.movie-actions[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:20px;flex-wrap:wrap}.movie-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}.movie-social[_ngcontent-%COMP%]{margin-bottom:20px}.btn-like[_ngcontent-%COMP%]{background:none;border:none;display:flex;align-items:center;gap:5px;padding:8px 12px;border-radius:20px;transition:background-color .3s ease;cursor:pointer}.btn-like[_ngcontent-%COMP%]:hover{background-color:#0000000d}.btn-like[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#999;font-size:20px;transition:color .3s ease,transform .3s ease}.btn-like.liked[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#f44336;transform:scale(1.1)}.comments-section[_ngcontent-%COMP%]{margin-top:40px}.comments-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px;margin-bottom:20px;color:#333;border-bottom:1px solid #eee;padding-bottom:10px}.comment-form[_ngcontent-%COMP%]{margin-bottom:30px}.comments-list[_ngcontent-%COMP%]{margin-top:20px}.comment[_ngcontent-%COMP%]{padding:15px;border-radius:8px;background-color:#f9f9f9;margin-bottom:15px}.comment-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:10px}.comment-author[_ngcontent-%COMP%]{font-weight:700;color:#333}.comment-date[_ngcontent-%COMP%]{font-size:12px;color:#777}.comment-content[_ngcontent-%COMP%]{color:#555;line-height:1.5}.no-comments[_ngcontent-%COMP%]{text-align:center;padding:20px;color:#777;font-style:italic}.not-found[_ngcontent-%COMP%]{text-align:center;padding:50px 0}.not-found[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:64px;color:#ddd;margin-bottom:20px}.not-found[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:10px;color:#555}.not-found[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:20px;color:#777}"]}),t})();function se(t,r){1&t&&(e.TgZ(0,"div",5)(1,"div",6)(2,"span",7),e._uU(3,"Loading..."),e.qZA()()())}function ae(t,r){if(1&t&&(e.TgZ(0,"div",8),e._uU(1),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.hij(" ",i.error," ")}}function ce(t,r){1&t&&(e.TgZ(0,"div",36),e._uU(1," Title is required. "),e.qZA())}function le(t,r){1&t&&(e.TgZ(0,"div",36),e._uU(1," Title cannot exceed 100 characters. "),e.qZA())}function me(t,r){1&t&&(e.TgZ(0,"div",36),e._uU(1," Genre cannot exceed 100 characters. "),e.qZA())}function de(t,r){1&t&&(e.TgZ(0,"div",36),e._uU(1," Release year must be 1900 or later. "),e.qZA())}function _e(t,r){1&t&&(e.TgZ(0,"div",36),e._uU(1," Release year cannot be more than 5 years in the future. "),e.qZA())}function pe(t,r){1&t&&(e.TgZ(0,"div",36),e._uU(1," Runtime must be at least 1 minute. "),e.qZA())}function ve(t,r){1&t&&(e.TgZ(0,"div",36),e._uU(1," Runtime cannot exceed 999 minutes. "),e.qZA())}function ge(t,r){1&t&&(e.TgZ(0,"div",36),e._uU(1," Poster URL cannot exceed 255 characters. "),e.qZA())}function ue(t,r){if(1&t&&(e.TgZ(0,"div",37),e._UZ(1,"img",38),e.qZA()),2&t){const i=e.oxw(2);let n;e.xp6(1),e.Q6J("src",null==(n=i.movieForm.get("posterUrl"))?null:n.value,e.LSH)}}function fe(t,r){1&t&&(e.TgZ(0,"div",36),e._uU(1," Status is required. "),e.qZA())}function he(t,r){1&t&&(e.TgZ(0,"div",36),e._uU(1," Rating must be at least 1. "),e.qZA())}function xe(t,r){1&t&&(e.TgZ(0,"div",36),e._uU(1," Rating cannot exceed 10. "),e.qZA())}const v=function(t){return{"is-invalid":t}};function Ce(t,r){if(1&t&&(e.TgZ(0,"div",14)(1,"label",39),e._uU(2,"Rating (1-10)"),e.qZA(),e._UZ(3,"input",40),e.YNc(4,he,2,0,"div",17),e.YNc(5,xe,2,0,"div",17),e.qZA()),2&t){const i=e.oxw(2);let n,o,s;e.xp6(3),e.Q6J("ngClass",e.VKq(3,v,(null==(n=i.movieForm.get("rating"))?null:n.invalid)&&(null==(n=i.movieForm.get("rating"))?null:n.touched))),e.xp6(1),e.Q6J("ngIf",null==(o=i.movieForm.get("rating"))||null==o.errors?null:o.errors.min),e.xp6(1),e.Q6J("ngIf",null==(s=i.movieForm.get("rating"))||null==s.errors?null:s.errors.max)}}function be(t,r){1&t&&(e.TgZ(0,"div",36),e._uU(1," Review cannot exceed 1000 characters. "),e.qZA())}function Me(t,r){if(1&t&&(e.TgZ(0,"div",14)(1,"label",41),e._uU(2,"Review"),e.qZA(),e._UZ(3,"textarea",42),e.YNc(4,be,2,0,"div",17),e.qZA()),2&t){const i=e.oxw(2);let n,o;e.xp6(3),e.Q6J("ngClass",e.VKq(2,v,(null==(n=i.movieForm.get("review"))?null:n.invalid)&&(null==(n=i.movieForm.get("review"))?null:n.touched))),e.xp6(1),e.Q6J("ngIf",null==(o=i.movieForm.get("review"))||null==o.errors?null:o.errors.maxlength)}}function Ze(t,r){1&t&&e._UZ(0,"span",43)}function Te(t,r){if(1&t){const i=e.EpF();e.TgZ(0,"div",9)(1,"div",10)(2,"form",11),e.NdJ("ngSubmit",function(){e.CHM(i);const o=e.oxw();return e.KtG(o.onSubmit())}),e.TgZ(3,"div",12)(4,"div",13)(5,"div",14)(6,"label",15),e._uU(7,"Title *"),e.qZA(),e._UZ(8,"input",16),e.YNc(9,ce,2,0,"div",17),e.YNc(10,le,2,0,"div",17),e.qZA(),e.TgZ(11,"div",14)(12,"label",18),e._uU(13,"Genre"),e.qZA(),e._UZ(14,"input",19),e.YNc(15,me,2,0,"div",17),e.qZA(),e.TgZ(16,"div",14)(17,"label",20),e._uU(18,"Release Year"),e.qZA(),e._UZ(19,"input",21),e.YNc(20,de,2,0,"div",17),e.YNc(21,_e,2,0,"div",17),e.qZA(),e.TgZ(22,"div",14)(23,"label",22),e._uU(24,"Runtime (minutes)"),e.qZA(),e._UZ(25,"input",23),e.YNc(26,pe,2,0,"div",17),e.YNc(27,ve,2,0,"div",17),e.qZA()(),e.TgZ(28,"div",13)(29,"div",14)(30,"label",24),e._uU(31,"Poster URL"),e.qZA(),e._UZ(32,"input",25),e.YNc(33,ge,2,0,"div",17),e.YNc(34,ue,2,1,"div",26),e.qZA(),e.TgZ(35,"div",14)(36,"label",27),e._uU(37,"Status *"),e.qZA(),e.TgZ(38,"select",28)(39,"option",29),e._uU(40,"Wishlist"),e.qZA(),e.TgZ(41,"option",30),e._uU(42,"Watched"),e.qZA()(),e.YNc(43,fe,2,0,"div",17),e.qZA(),e.YNc(44,Ce,6,5,"div",31),e.YNc(45,Me,5,4,"div",31),e.qZA()(),e.TgZ(46,"div",32)(47,"button",33),e.NdJ("click",function(){e.CHM(i);const o=e.oxw();return e.KtG(o.cancel())}),e._uU(48,"Cancel"),e.qZA(),e.TgZ(49,"button",34),e.YNc(50,Ze,1,0,"span",35),e._uU(51),e.qZA()()()()()}if(2&t){const i=e.oxw();let n,o,s,a,l,g,M,Z,h,T,w,x,A,k,C,U,q,P;e.xp6(2),e.Q6J("formGroup",i.movieForm),e.xp6(6),e.Q6J("ngClass",e.VKq(22,v,(null==(n=i.movieForm.get("title"))?null:n.invalid)&&(null==(n=i.movieForm.get("title"))?null:n.touched))),e.xp6(1),e.Q6J("ngIf",null==(o=i.movieForm.get("title"))||null==o.errors?null:o.errors.required),e.xp6(1),e.Q6J("ngIf",null==(s=i.movieForm.get("title"))||null==s.errors?null:s.errors.maxlength),e.xp6(4),e.Q6J("ngClass",e.VKq(24,v,(null==(a=i.movieForm.get("genre"))?null:a.invalid)&&(null==(a=i.movieForm.get("genre"))?null:a.touched))),e.xp6(1),e.Q6J("ngIf",null==(l=i.movieForm.get("genre"))||null==l.errors?null:l.errors.maxlength),e.xp6(4),e.Q6J("ngClass",e.VKq(26,v,(null==(g=i.movieForm.get("releaseYear"))?null:g.invalid)&&(null==(g=i.movieForm.get("releaseYear"))?null:g.touched))),e.xp6(1),e.Q6J("ngIf",null==(M=i.movieForm.get("releaseYear"))||null==M.errors?null:M.errors.min),e.xp6(1),e.Q6J("ngIf",null==(Z=i.movieForm.get("releaseYear"))||null==Z.errors?null:Z.errors.max),e.xp6(4),e.Q6J("ngClass",e.VKq(28,v,(null==(h=i.movieForm.get("runtime"))?null:h.invalid)&&(null==(h=i.movieForm.get("runtime"))?null:h.touched))),e.xp6(1),e.Q6J("ngIf",null==(T=i.movieForm.get("runtime"))||null==T.errors?null:T.errors.min),e.xp6(1),e.Q6J("ngIf",null==(w=i.movieForm.get("runtime"))||null==w.errors?null:w.errors.max),e.xp6(5),e.Q6J("ngClass",e.VKq(30,v,(null==(x=i.movieForm.get("posterUrl"))?null:x.invalid)&&(null==(x=i.movieForm.get("posterUrl"))?null:x.touched))),e.xp6(1),e.Q6J("ngIf",null==(A=i.movieForm.get("posterUrl"))||null==A.errors?null:A.errors.maxlength),e.xp6(1),e.Q6J("ngIf",null==(k=i.movieForm.get("posterUrl"))?null:k.value),e.xp6(4),e.Q6J("ngClass",e.VKq(32,v,(null==(C=i.movieForm.get("status"))?null:C.invalid)&&(null==(C=i.movieForm.get("status"))?null:C.touched))),e.xp6(5),e.Q6J("ngIf",null==(U=i.movieForm.get("status"))||null==U.errors?null:U.errors.required),e.xp6(1),e.Q6J("ngIf","WATCHED"===(null==(q=i.movieForm.get("status"))?null:q.value)),e.xp6(1),e.Q6J("ngIf","WATCHED"===(null==(P=i.movieForm.get("status"))?null:P.value)),e.xp6(4),e.Q6J("disabled",i.movieForm.invalid||i.submitting),e.xp6(1),e.Q6J("ngIf",i.submitting),e.xp6(1),e.hij(" ",i.isEditMode?"Update":"Add"," Movie ")}}let I=(()=>{const r=class{constructor(n,o,s,a){this.formBuilder=n,this.route=o,this.router=s,this.movieService=a,this.isEditMode=!1,this.loading=!1,this.submitting=!1,this.error=""}ngOnInit(){this.initForm(),this.route.paramMap.subscribe(n=>{const o=n.get("id");o&&(this.isEditMode=!0,this.movieId=+o,this.loadMovie(this.movieId))})}initForm(){this.movieForm=this.formBuilder.group({title:["",[c.kI.required,c.kI.maxLength(100)]],genre:["",[c.kI.maxLength(100)]],releaseYear:[null,[c.kI.min(1900),c.kI.max((new Date).getFullYear()+5)]],runtime:[null,[c.kI.min(1),c.kI.max(999)]],posterUrl:["",[c.kI.maxLength(255)]],status:["WISHLIST",c.kI.required],rating:[null,[c.kI.min(1),c.kI.max(10)]],review:["",[c.kI.maxLength(1e3)]]})}loadMovie(n){this.loading=!0,this.movieService.getMovie(n).subscribe({next:o=>{this.movieForm.patchValue({title:o.title,genre:o.genre,releaseYear:o.releaseYear,runtime:o.runtime,posterUrl:o.posterUrl,status:o.status,rating:o.rating,review:o.review}),this.loading=!1},error:o=>{this.error="Failed to load movie. Please try again later.",console.error("Error loading movie:",o),this.loading=!1}})}onSubmit(){if(this.movieForm.invalid)return;this.submitting=!0;const n=this.movieForm.value;this.isEditMode&&this.movieId?this.movieService.updateMovie(this.movieId,n).subscribe({next:()=>{this.submitting=!1,this.router.navigate(["/movies/detail",this.movieId])},error:o=>{this.error="Failed to update movie. Please try again later.",console.error("Error updating movie:",o),this.submitting=!1}}):this.movieService.addMovie(n).subscribe({next:o=>{this.submitting=!1,this.router.navigate(["/movies/detail",o.id])},error:o=>{this.error="Failed to add movie. Please try again later.",console.error("Error adding movie:",o),this.submitting=!1}})}cancel(){this.router.navigate(this.isEditMode&&this.movieId?["/movies/detail",this.movieId]:["/movies/wishlist"])}};let t=r;return r.\u0275fac=function(o){return new(o||r)(e.Y36(c.qu),e.Y36(p.gz),e.Y36(p.F0),e.Y36(f))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-movie-form"]],decls:7,vars:4,consts:[[1,"container"],[1,"form-header"],["class","loading-spinner",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["class","card",4,"ngIf"],[1,"loading-spinner"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"alert","alert-danger"],[1,"card"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-6"],[1,"mb-3"],["for","title",1,"form-label"],["type","text","id","title","formControlName","title",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","genre",1,"form-label"],["type","text","id","genre","formControlName","genre",1,"form-control",3,"ngClass"],["for","releaseYear",1,"form-label"],["type","number","id","releaseYear","formControlName","releaseYear",1,"form-control",3,"ngClass"],["for","runtime",1,"form-label"],["type","number","id","runtime","formControlName","runtime",1,"form-control",3,"ngClass"],["for","posterUrl",1,"form-label"],["type","text","id","posterUrl","formControlName","posterUrl",1,"form-control",3,"ngClass"],["class","poster-preview",4,"ngIf"],["for","status",1,"form-label"],["id","status","formControlName","status",1,"form-select",3,"ngClass"],["value","WISHLIST"],["value","WATCHED"],["class","mb-3",4,"ngIf"],[1,"form-actions"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],[1,"invalid-feedback"],[1,"poster-preview"],["alt","Movie poster preview",3,"src"],["for","rating",1,"form-label"],["type","number","id","rating","formControlName","rating",1,"form-control",3,"ngClass"],["for","review",1,"form-label"],["id","review","formControlName","review","rows","4",1,"form-control",3,"ngClass"],[1,"spinner-border","spinner-border-sm","me-1"]],template:function(o,s){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h1"),e._uU(3),e.qZA()(),e.YNc(4,se,4,0,"div",2),e.YNc(5,ae,2,1,"div",3),e.YNc(6,Te,52,34,"div",4),e.qZA()),2&o&&(e.xp6(3),e.hij("",s.isEditMode?"Edit":"Add"," Movie"),e.xp6(1),e.Q6J("ngIf",s.loading),e.xp6(1),e.Q6J("ngIf",s.error),e.xp6(1),e.Q6J("ngIf",!s.loading))},dependencies:[m.mk,m.O5,c._Y,c.YN,c.Kr,c.Fj,c.wV,c.EJ,c.JJ,c.JL,c.sg,c.u],styles:[".form-header[_ngcontent-%COMP%]{margin-bottom:20px}.form-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#333}.loading-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:30px 0}.card[_ngcontent-%COMP%]{box-shadow:0 4px 8px #0000001a;border:none;margin-bottom:30px}.card-body[_ngcontent-%COMP%]{padding:30px}.form-label[_ngcontent-%COMP%]{font-weight:500;color:#555}.poster-preview[_ngcontent-%COMP%]{margin-top:10px;border-radius:4px;overflow:hidden;max-width:200px}.poster-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;display:block}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;margin-top:20px;padding-top:20px;border-top:1px solid #eee}"]}),t})();function we(t,r){if(1&t&&e._UZ(0,"img",16),2&t){const i=e.oxw().$implicit;e.Q6J("src",i.posterUrl,e.LSH)("alt",i.title)}}function Ae(t,r){1&t&&(e.TgZ(0,"div",17)(1,"i",18),e._uU(2,"movie"),e.qZA()())}const Ue=function(t,r){return{wishlist:t,watched:r}};function Oe(t,r){if(1&t&&(e.TgZ(0,"div",19)(1,"span",20),e._uU(2),e.qZA()()),2&t){const i=e.oxw().$implicit;e.xp6(1),e.Q6J("ngClass",e.WLB(2,Ue,"WISHLIST"===i.status,"WATCHED"===i.status)),e.xp6(1),e.Oqu(i.status)}}function Ie(t,r){if(1&t&&(e.TgZ(0,"p",21),e._uU(1),e.qZA()),2&t){const i=e.oxw().$implicit;e.xp6(1),e.Oqu(i.releaseYear)}}function ke(t,r){if(1&t&&(e.TgZ(0,"p",22),e._uU(1),e.qZA()),2&t){const i=e.oxw().$implicit;e.xp6(1),e.Oqu(i.genre)}}const qe=function(t,r){return{filled:t,"half-filled":r}};function Pe(t,r){if(1&t&&(e.TgZ(0,"i",27),e._uU(1," star "),e.qZA()),2&t){const i=r.$implicit,n=e.oxw(2).$implicit,o=e.oxw(2);e.Q6J("ngClass",e.WLB(1,qe,i<=n.rating/2,i===o.ceil(n.rating/2)&&n.rating%2!=0))}}const ye=function(){return[1,2,3,4,5]};function Je(t,r){if(1&t&&(e.TgZ(0,"div",23)(1,"span",24),e._uU(2),e.qZA(),e.TgZ(3,"div",25),e.YNc(4,Pe,2,4,"i",26),e.qZA()()),2&t){const i=e.oxw().$implicit;e.xp6(2),e.hij("",i.rating,"/10"),e.xp6(2),e.Q6J("ngForOf",e.DdM(2,ye))}}function Ne(t,r){if(1&t&&(e.TgZ(0,"span",32)(1,"i",18),e._uU(2,"comment"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.qZA()()),2&t){const i=e.oxw(2).$implicit;e.xp6(4),e.Oqu(i.commentsCount)}}const Fe=function(t){return{liked:t}};function Ye(t,r){if(1&t){const i=e.EpF();e.TgZ(0,"div",28)(1,"span",29)(2,"i",30),e.NdJ("click",function(o){e.CHM(i);const s=e.oxw().$implicit,a=e.oxw(2);return e.KtG(a.likeMovie(s.id,o))}),e._uU(3," favorite "),e.qZA(),e.TgZ(4,"span"),e._uU(5),e.qZA()(),e.YNc(6,Ne,5,1,"span",31),e.qZA()}if(2&t){const i=e.oxw().$implicit;e.xp6(2),e.Q6J("ngClass",e.VKq(3,Fe,i.userLiked)),e.xp6(3),e.Oqu(i.likesCount||0),e.xp6(1),e.Q6J("ngIf",void 0!==i.commentsCount)}}function Qe(t,r){if(1&t){const i=e.EpF();e.TgZ(0,"button",39),e.NdJ("click",function(o){e.CHM(i);const s=e.oxw(2).$implicit,a=e.oxw(2);return e.KtG(a.editMovie(s.id,o))}),e.TgZ(1,"i",18),e._uU(2,"edit"),e.qZA()()}}function Le(t,r){if(1&t){const i=e.EpF();e.TgZ(0,"button",40),e.NdJ("click",function(o){e.CHM(i);const s=e.oxw(2).$implicit,a=e.oxw(2);return e.KtG(a.deleteMovie(s.id,o))}),e.TgZ(1,"i",18),e._uU(2,"delete"),e.qZA()()}}function De(t,r){if(1&t){const i=e.EpF();e.TgZ(0,"button",41),e.NdJ("click",function(o){e.CHM(i);const s=e.oxw(2).$implicit,a=e.oxw(2);return e.KtG(a.markAsWatched(s.id,o))}),e.TgZ(1,"i",18),e._uU(2,"visibility"),e.qZA()()}}function We(t,r){if(1&t){const i=e.EpF();e.TgZ(0,"button",42),e.NdJ("click",function(o){e.CHM(i);const s=e.oxw(2).$implicit,a=e.oxw(2);return e.KtG(a.addToWishlist(s.id,o))}),e.TgZ(1,"i",18),e._uU(2,"bookmark"),e.qZA()()}}function Ee(t,r){if(1&t){const i=e.EpF();e.TgZ(0,"button",43),e.NdJ("click",function(o){e.CHM(i);const s=e.oxw(2).$implicit,a=e.oxw(2);return e.KtG(a.addNewMovie(s,o))}),e.TgZ(1,"i",18),e._uU(2,"add"),e.qZA()()}}function Se(t,r){if(1&t&&(e.TgZ(0,"div",33),e.YNc(1,Qe,3,0,"button",34),e.YNc(2,Le,3,0,"button",35),e.YNc(3,De,3,0,"button",36),e.YNc(4,We,3,0,"button",37),e.YNc(5,Ee,3,0,"button",38),e.qZA()),2&t){const i=e.oxw().$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!n.isDiscover),e.xp6(1),e.Q6J("ngIf",!n.isDiscover),e.xp6(1),e.Q6J("ngIf",n.isWishlist||n.isDiscover&&!i.status),e.xp6(1),e.Q6J("ngIf",n.isWatched||n.isDiscover&&!i.status),e.xp6(1),e.Q6J("ngIf",n.isDiscover&&!i.id)}}function $e(t,r){if(1&t){const i=e.EpF();e.TgZ(0,"div",4),e.NdJ("click",function(){const s=e.CHM(i).$implicit,a=e.oxw(2);return e.KtG(a.viewDetails(s.id))}),e.TgZ(1,"div",5),e.YNc(2,we,1,2,"img",6),e.YNc(3,Ae,3,0,"div",7),e.YNc(4,Oe,3,5,"div",8),e.qZA(),e.TgZ(5,"div",9)(6,"h3",10),e._uU(7),e.qZA(),e.YNc(8,Ie,2,1,"p",11),e.YNc(9,ke,2,1,"p",12),e.YNc(10,Je,5,3,"div",13),e.YNc(11,Ye,7,5,"div",14),e.qZA(),e.YNc(12,Se,6,5,"div",15),e.qZA()}if(2&t){const i=r.$implicit,n=e.oxw(2);e.xp6(2),e.Q6J("ngIf",i.posterUrl),e.xp6(1),e.Q6J("ngIf",!i.posterUrl),e.xp6(1),e.Q6J("ngIf",i.status),e.xp6(3),e.Oqu(i.title),e.xp6(1),e.Q6J("ngIf",i.releaseYear),e.xp6(1),e.Q6J("ngIf",i.genre),e.xp6(1),e.Q6J("ngIf",i.rating),e.xp6(1),e.Q6J("ngIf",!n.isDiscover),e.xp6(1),e.Q6J("ngIf",n.showActions)}}function Ke(t,r){if(1&t&&(e.TgZ(0,"div",2),e.YNc(1,$e,13,9,"div",3),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.Q6J("ngForOf",i.movies)}}function je(t,r){1&t&&(e.ynx(0),e._uU(1,"No movies in your wishlist"),e.BQk())}function He(t,r){1&t&&(e.ynx(0),e._uU(1,"No watched movies"),e.BQk())}function ze(t,r){1&t&&(e.ynx(0),e._uU(1,"No movies found"),e.BQk())}function Re(t,r){1&t&&(e.ynx(0),e._uU(1,"No movies available"),e.BQk())}function Ge(t,r){1&t&&(e.ynx(0),e._uU(1,"Add movies to your wishlist to see them here"),e.BQk())}function Be(t,r){1&t&&(e.ynx(0),e._uU(1,"Mark movies as watched to see them here"),e.BQk())}function Ve(t,r){1&t&&(e.ynx(0),e._uU(1,"Try searching for movies"),e.BQk())}function Xe(t,r){1&t&&(e.ynx(0),e._uU(1,"No movies found"),e.BQk())}function et(t,r){if(1&t&&(e.TgZ(0,"div",44)(1,"i",18),e._uU(2,"movie_filter"),e.qZA(),e.TgZ(3,"h3"),e.YNc(4,je,2,0,"ng-container",45),e.YNc(5,He,2,0,"ng-container",45),e.YNc(6,ze,2,0,"ng-container",45),e.YNc(7,Re,2,0,"ng-container",45),e.qZA(),e.TgZ(8,"p"),e.YNc(9,Ge,2,0,"ng-container",45),e.YNc(10,Be,2,0,"ng-container",45),e.YNc(11,Ve,2,0,"ng-container",45),e.YNc(12,Xe,2,0,"ng-container",45),e.qZA()()),2&t){const i=e.oxw();e.xp6(4),e.Q6J("ngIf",i.isWishlist),e.xp6(1),e.Q6J("ngIf",i.isWatched),e.xp6(1),e.Q6J("ngIf",i.isDiscover),e.xp6(1),e.Q6J("ngIf",!i.isWishlist&&!i.isWatched&&!i.isDiscover),e.xp6(2),e.Q6J("ngIf",i.isWishlist),e.xp6(1),e.Q6J("ngIf",i.isWatched),e.xp6(1),e.Q6J("ngIf",i.isDiscover),e.xp6(1),e.Q6J("ngIf",!i.isWishlist&&!i.isWatched&&!i.isDiscover)}}let b=(()=>{const r=class{constructor(n,o){this.movieService=n,this.router=o,this.movies=[],this.showActions=!0,this.isWishlist=!1,this.isWatched=!1,this.isDiscover=!1}ngOnInit(){}ceil(n){return Math.ceil(n)}viewDetails(n){this.router.navigate(["/movies/detail",n])}editMovie(n,o){o.stopPropagation(),this.router.navigate(["/movies/edit",n])}deleteMovie(n,o){o.stopPropagation(),confirm("Are you sure you want to delete this movie?")&&this.movieService.deleteMovie(n).subscribe(()=>{this.movies=this.movies.filter(s=>s.id!==n)})}markAsWatched(n,o){o.stopPropagation();const s=this.movies.find(a=>a.id===n);s&&this.movieService.markAsWatched(n,s.rating,s.review).subscribe(a=>{if(this.isWishlist)this.movies=this.movies.filter(l=>l.id!==n);else{const l=this.movies.findIndex(g=>g.id===n);-1!==l&&(this.movies[l]={...s,status:"WATCHED"})}})}addToWishlist(n,o){o.stopPropagation();const s=this.movies.find(a=>a.id===n);if(s){const a={...s,status:"WISHLIST"};this.movieService.updateMovie(n,a).subscribe(()=>{if(this.isWatched)this.movies=this.movies.filter(l=>l.id!==n);else{const l=this.movies.findIndex(g=>g.id===n);-1!==l&&(this.movies[l]={...a})}})}}addNewMovie(n,o){o.stopPropagation();const s={id:0,title:n.title,releaseYear:new Date(n.release_date).getFullYear(),posterUrl:n.poster_path?`https://image.tmdb.org/t/p/w500${n.poster_path}`:"",status:"WISHLIST",genre:n.genres?n.genres.map(a=>a.name).join(", "):"",runtime:n.runtime||0,rating:void 0,review:void 0,userId:0,username:"",likesCount:0,commentsCount:0,userLiked:!1};this.movieService.addMovie(s).subscribe(a=>{this.isWishlist&&this.movies.push(a),alert("Movie added to wishlist!")})}likeMovie(n,o){o.stopPropagation();const s=this.movies.find(a=>a.id===n);s&&(s.userLiked?this.movieService.unlikeMovie(n).subscribe(()=>{const a=this.movies.findIndex(l=>l.id===n);-1!==a&&(this.movies[a]={...s,userLiked:!1,likesCount:(s.likesCount||0)-1})}):this.movieService.likeMovie(n).subscribe(()=>{const a=this.movies.findIndex(l=>l.id===n);-1!==a&&(this.movies[a]={...s,userLiked:!0,likesCount:(s.likesCount||0)+1})}))}};let t=r;return r.\u0275fac=function(o){return new(o||r)(e.Y36(f),e.Y36(p.F0))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-movie-list"]],inputs:{movies:"movies",showActions:"showActions",isWishlist:"isWishlist",isWatched:"isWatched",isDiscover:"isDiscover"},decls:2,vars:2,consts:[["class","movie-grid",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"movie-grid"],["class","movie-card",3,"click",4,"ngFor","ngForOf"],[1,"movie-card",3,"click"],[1,"movie-poster"],[3,"src","alt",4,"ngIf"],["class","no-poster",4,"ngIf"],["class","movie-status",4,"ngIf"],[1,"movie-info"],[1,"movie-title"],["class","movie-year",4,"ngIf"],["class","movie-genre",4,"ngIf"],["class","movie-rating",4,"ngIf"],["class","movie-social",4,"ngIf"],["class","movie-actions",4,"ngIf"],[3,"src","alt"],[1,"no-poster"],[1,"material-icons"],[1,"movie-status"],[1,"badge",3,"ngClass"],[1,"movie-year"],[1,"movie-genre"],[1,"movie-rating"],[1,"rating-value"],[1,"rating-stars"],["class","material-icons",3,"ngClass",4,"ngFor","ngForOf"],[1,"material-icons",3,"ngClass"],[1,"movie-social"],[1,"likes"],[1,"material-icons",3,"ngClass","click"],["class","comments",4,"ngIf"],[1,"comments"],[1,"movie-actions"],["class","btn-action edit",3,"click",4,"ngIf"],["class","btn-action delete",3,"click",4,"ngIf"],["class","btn-action watched",3,"click",4,"ngIf"],["class","btn-action wishlist",3,"click",4,"ngIf"],["class","btn-action add",3,"click",4,"ngIf"],[1,"btn-action","edit",3,"click"],[1,"btn-action","delete",3,"click"],[1,"btn-action","watched",3,"click"],[1,"btn-action","wishlist",3,"click"],[1,"btn-action","add",3,"click"],[1,"empty-state"],[4,"ngIf"]],template:function(o,s){1&o&&(e.YNc(0,Ke,2,1,"div",0),e.YNc(1,et,13,8,"div",1)),2&o&&(e.Q6J("ngIf",s.movies&&s.movies.length>0),e.xp6(1),e.Q6J("ngIf",!s.movies||0===s.movies.length))},dependencies:[m.mk,m.sg,m.O5],styles:['.movie-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:20px;margin:20px 0}.movie-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 2px 10px #0000001a;overflow:hidden;transition:transform .3s ease,box-shadow .3s ease;position:relative;cursor:pointer}.movie-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 5px 15px #0003}.movie-poster[_ngcontent-%COMP%]{position:relative;height:300px;overflow:hidden}.movie-poster[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .3s ease}.movie-card[_ngcontent-%COMP%]:hover   .movie-poster[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:scale(1.05)}.no-poster[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%;background-color:#f0f0f0}.no-poster[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:48px;color:#999}.movie-status[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px}.badge[_ngcontent-%COMP%]{padding:5px 10px;border-radius:4px;font-size:12px;font-weight:700;text-transform:lowercase}.badge.wishlist[_ngcontent-%COMP%]{background-color:#ff9800;color:#fff}.badge.watched[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.movie-info[_ngcontent-%COMP%]{padding:15px}.movie-title[_ngcontent-%COMP%]{margin:0 0 5px;font-size:16px;font-weight:700;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.movie-year[_ngcontent-%COMP%], .movie-genre[_ngcontent-%COMP%]{margin:0 0 5px;font-size:14px;color:#666}.movie-genre[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.movie-rating[_ngcontent-%COMP%]{display:flex;align-items:center;margin-top:5px}.rating-value[_ngcontent-%COMP%]{font-weight:700;margin-right:10px}.rating-stars[_ngcontent-%COMP%]{display:flex}.rating-stars[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#ddd;font-size:18px}.rating-stars[_ngcontent-%COMP%]   i.filled[_ngcontent-%COMP%]{color:#ffc107}.rating-stars[_ngcontent-%COMP%]   i.half-filled[_ngcontent-%COMP%]{position:relative}.rating-stars[_ngcontent-%COMP%]   i.half-filled[_ngcontent-%COMP%]:after{content:"star_half";position:absolute;top:0;left:0;color:#ffc107}.movie-social[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:10px}.likes[_ngcontent-%COMP%], .comments[_ngcontent-%COMP%]{display:flex;align-items:center}.likes[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .comments[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px;margin-right:5px;color:#999}.likes[_ngcontent-%COMP%]   i.liked[_ngcontent-%COMP%]{color:#f44336}.movie-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-around;padding:10px;background-color:#f9f9f9;border-top:1px solid #eee}.btn-action[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:5px;border-radius:50%;transition:background-color .3s ease}.btn-action[_ngcontent-%COMP%]:hover{background-color:#0000001a}.btn-action[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px}.edit[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#2196f3}.delete[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#f44336}.watched[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#4caf50}.wishlist[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#ff9800}.add[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#9c27b0}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:50px 20px;text-align:center}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:64px;color:#ddd;margin-bottom:20px}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;color:#666}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#999}']}),t})();function tt(t,r){1&t&&(e.TgZ(0,"div",7)(1,"div",8)(2,"span",9),e._uU(3,"Loading..."),e.qZA()()())}function it(t,r){if(1&t&&(e.TgZ(0,"div",10),e._uU(1),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.hij(" ",i.error," ")}}function ot(t,r){1&t&&(e.TgZ(0,"div",7)(1,"div",8)(2,"span",9),e._uU(3,"Loading..."),e.qZA()()())}function rt(t,r){if(1&t&&(e.TgZ(0,"div",10),e._uU(1),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.hij(" ",i.error," ")}}function at(t,r){1&t&&(e.TgZ(0,"span"),e._uU(1,"Search"),e.qZA())}function ct(t,r){1&t&&e._UZ(0,"span",10)}function lt(t,r){if(1&t){const i=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(){e.CHM(i);const o=e.oxw();return e.KtG(o.clearSearch())}),e.TgZ(1,"i",5),e._uU(2,"clear"),e.qZA(),e._uU(3," Clear "),e.qZA()}}function mt(t,r){if(1&t&&(e.TgZ(0,"div",12),e._uU(1),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.hij(" ",i.error," ")}}function dt(t,r){if(1&t&&(e.TgZ(0,"div")(1,"h2"),e._uU(2,"Search Results"),e.qZA(),e._UZ(3,"app-movie-list",13),e.qZA()),2&t){const i=e.oxw();e.xp6(3),e.Q6J("movies",i.searchResults)("showActions",!0)("isDiscover",!0)}}function _t(t,r){1&t&&(e.TgZ(0,"div",15)(1,"div",16)(2,"span",17),e._uU(3,"Loading..."),e.qZA()()())}function pt(t,r){if(1&t&&(e.TgZ(0,"div")(1,"h2"),e._uU(2,"Trending Movies"),e.qZA(),e.YNc(3,_t,4,0,"div",14),e._UZ(4,"app-movie-list",13),e.qZA()),2&t){const i=e.oxw();e.xp6(3),e.Q6J("ngIf",i.loading),e.xp6(1),e.Q6J("movies",i.trendingMovies)("showActions",!0)("isDiscover",!0)}}const vt=[{path:"wishlist",component:(()=>{const r=class{constructor(n){this.movieService=n,this.movies=[],this.loading=!1,this.error=""}ngOnInit(){this.loadWishlist()}loadWishlist(){this.loading=!0,this.movieService.getWishlist().subscribe({next:n=>{this.movies=n,this.loading=!1},error:n=>{this.error="Failed to load wishlist. Please try again later.",console.error("Error loading wishlist:",n),this.loading=!1}})}};let t=r;return r.\u0275fac=function(o){return new(o||r)(e.Y36(f))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-wishlist"]],decls:11,vars:5,consts:[[1,"container"],[1,"wishlist-header"],["routerLink","/movies/add",1,"btn","btn-primary"],[1,"material-icons"],["class","loading-spinner",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[3,"movies","showActions","isWishlist"],[1,"loading-spinner"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"alert","alert-danger"]],template:function(o,s){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h1"),e._uU(3,"My Wishlist"),e.qZA(),e.TgZ(4,"button",2)(5,"i",3),e._uU(6,"add"),e.qZA(),e._uU(7," Add Movie "),e.qZA()(),e.YNc(8,tt,4,0,"div",4),e.YNc(9,it,2,1,"div",5),e._UZ(10,"app-movie-list",6),e.qZA()),2&o&&(e.xp6(8),e.Q6J("ngIf",s.loading),e.xp6(1),e.Q6J("ngIf",s.error),e.xp6(1),e.Q6J("movies",s.movies)("showActions",!0)("isWishlist",!0))},dependencies:[m.O5,p.rH,b],styles:[".wishlist-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.wishlist-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:700;color:#333}.btn-primary[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}.loading-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:30px 0}"]}),t})()},{path:"watched",component:(()=>{const r=class{constructor(n){this.movieService=n,this.movies=[],this.loading=!1,this.error=""}ngOnInit(){this.loadWatchedMovies()}loadWatchedMovies(){this.loading=!0,this.movieService.getWatched().subscribe({next:n=>{this.movies=n,this.loading=!1},error:n=>{this.error="Failed to load watched movies. Please try again later.",console.error("Error loading watched movies:",n),this.loading=!1}})}};let t=r;return r.\u0275fac=function(o){return new(o||r)(e.Y36(f))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-watched"]],decls:11,vars:5,consts:[[1,"container"],[1,"watched-header"],["routerLink","/movies/add",1,"btn","btn-primary"],[1,"material-icons"],["class","loading-spinner",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[3,"movies","showActions","isWatched"],[1,"loading-spinner"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"alert","alert-danger"]],template:function(o,s){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h1"),e._uU(3,"Watched Movies"),e.qZA(),e.TgZ(4,"button",2)(5,"i",3),e._uU(6,"add"),e.qZA(),e._uU(7," Add Movie "),e.qZA()(),e.YNc(8,ot,4,0,"div",4),e.YNc(9,rt,2,1,"div",5),e._UZ(10,"app-movie-list",6),e.qZA()),2&o&&(e.xp6(8),e.Q6J("ngIf",s.loading),e.xp6(1),e.Q6J("ngIf",s.error),e.xp6(1),e.Q6J("movies",s.movies)("showActions",!0)("isWatched",!0))},dependencies:[m.O5,p.rH,b],styles:[".watched-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.watched-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:700;color:#333}.btn-primary[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}.loading-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:30px 0}"]}),t})()},{path:"discover",component:(()=>{const r=class{constructor(n){this.movieService=n,this.searchQuery="",this.searchResults=[],this.trendingMovies=[],this.loading=!1,this.searchLoading=!1,this.error=""}ngOnInit(){this.loadTrendingMovies()}loadTrendingMovies(){this.loading=!0,this.movieService.getTrending().subscribe({next:n=>{this.trendingMovies=n.results||[],this.loading=!1},error:n=>{this.error="Failed to load trending movies. Please try again later.",console.error("Error loading trending movies:",n),this.loading=!1}})}searchMovies(){this.searchQuery.trim()&&(this.searchLoading=!0,this.movieService.searchMovies(this.searchQuery).subscribe({next:n=>{this.searchResults=n.results||[],this.searchLoading=!1},error:n=>{this.error="Failed to search movies. Please try again later.",console.error("Error searching movies:",n),this.searchLoading=!1}}))}clearSearch(){this.searchQuery="",this.searchResults=[]}};let t=r;return r.\u0275fac=function(o){return new(o||r)(e.Y36(f))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-discover"]],decls:15,vars:8,consts:[[1,"container"],[1,"discover-header"],[1,"search-box"],["type","text","placeholder","Search for movies...",1,"form-control",3,"ngModel","ngModelChange","keyup.enter"],[1,"btn","btn-primary",3,"disabled","click"],[1,"material-icons"],[4,"ngIf"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],["class","btn btn-outline-secondary",3,"click",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],[1,"btn","btn-outline-secondary",3,"click"],[1,"alert","alert-danger"],[3,"movies","showActions","isDiscover"],["class","loading-spinner",4,"ngIf"],[1,"loading-spinner"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"]],template:function(o,s){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h1"),e._uU(3,"Discover Movies"),e.qZA(),e.TgZ(4,"div",2)(5,"input",3),e.NdJ("ngModelChange",function(l){return s.searchQuery=l})("keyup.enter",function(){return s.searchMovies()}),e.qZA(),e.TgZ(6,"button",4),e.NdJ("click",function(){return s.searchMovies()}),e.TgZ(7,"i",5),e._uU(8,"search"),e.qZA(),e.YNc(9,at,2,0,"span",6),e.YNc(10,ct,1,0,"span",7),e.qZA(),e.YNc(11,lt,4,0,"button",8),e.qZA()(),e.YNc(12,mt,2,1,"div",9),e.YNc(13,dt,4,3,"div",6),e.YNc(14,pt,5,4,"div",6),e.qZA()),2&o&&(e.xp6(5),e.Q6J("ngModel",s.searchQuery),e.xp6(1),e.Q6J("disabled",s.searchLoading),e.xp6(3),e.Q6J("ngIf",!s.searchLoading),e.xp6(1),e.Q6J("ngIf",s.searchLoading),e.xp6(1),e.Q6J("ngIf",s.searchResults.length>0),e.xp6(1),e.Q6J("ngIf",s.error),e.xp6(1),e.Q6J("ngIf",s.searchResults.length>0),e.xp6(1),e.Q6J("ngIf",!s.searchResults.length))},dependencies:[m.O5,c.Fj,c.JJ,c.On,b],styles:[".discover-header[_ngcontent-%COMP%]{margin-bottom:20px}.discover-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:20px;font-size:24px;font-weight:700;color:#333}.search-box[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:20px}.search-box[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{flex:1}.btn-primary[_ngcontent-%COMP%], .btn-outline-secondary[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}h2[_ngcontent-%COMP%]{font-size:20px;margin:30px 0 15px;color:#555;border-bottom:1px solid #eee;padding-bottom:10px}.loading-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:30px 0}"]}),t})()},{path:"detail/:id",component:re},{path:"add",component:I},{path:"edit/:id",component:I}];let gt=(()=>{const r=class{};let t=r;return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[m.ez,c.u5,c.UX,p.Bz.forChild(vt)]}),t})()}}]);